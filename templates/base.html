{% load static %}
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{% block title %}Fashion Shop{% endblock %}</title>
  <link rel="stylesheet" href="{% static 'css/site.css' %}">
</head>
<body>
  <header>
    <h1><a href="{% url 'home' %}">Fashion Shop</a></h1>
    <nav>
      {% for cat in categories %}
        <a href="{{ cat.get_absolute_url }}">{{ cat.name }}</a>
      {% endfor %}

      <form action="{% url 'product_list' %}" method="get" style="display:inline;">
        <input type ="text" name="q" placeholder="Search..." value="{{ q|default:'' }}">
        <button>🔍</button>
      </form>

      <a href="{% url 'cart:detail' %}">Cart ({{ cart|length }})</a>
      {% if user.is_authenticated %}

        <span>Hi, {{ user.username }}!</span>

        <form action="{% url 'logout' %}" method="post" style="display:inline;">
          {% csrf_token %}
          <button type="submit">Log Out</button>
        </form>

        <a href="{% url 'orders:history' %}">My orders</a>

      {% else %}
        <a href="{% url 'login' %}?next={{ request.path }}">Log in</a>
      {% endif %}
    </nav>
  </header>

  <main>{% block content %}{% endblock %}</main>

  <footer>&copy; 2025 Fashion Shop</footer>
</body>
</html>
